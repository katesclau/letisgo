(()=>{typeof window.modalState>"u"&&(window.modalState={openModalId:null});(function(){function o(t,e=!1){if(!t||t.style.display==="none")return;let n=t.querySelector("[data-modal-content]"),d=t.id;t.classList.remove("opacity-100"),t.classList.add("opacity-0"),n&&(n.classList.remove("scale-100","opacity-100"),n.classList.add("scale-95","opacity-0"));function a(){t.style.display="none",window.modalState.openModalId===d&&(window.modalState.openModalId=null,document.body.style.overflow="")}e?a():setTimeout(a,300)}function r(t){if(!t)return;if(window.modalState.openModalId){let n=document.getElementById(window.modalState.openModalId);n&&n!==t&&o(n,!0)}let e=t.querySelector("[data-modal-content]");t.style.display="flex",window.modalState.openModalId=t.id,document.body.style.overflow="hidden",t.offsetHeight,t.classList.remove("opacity-0"),t.classList.add("opacity-100"),e&&(e.classList.remove("scale-95","opacity-0"),e.classList.add("scale-100","opacity-100"),setTimeout(()=>{let n=e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n&&n.focus()},50))}function f(t,e=!1){let n=document.getElementById(t);n&&o(n,e)}function u(t){let e=document.getElementById(t);e&&r(e)}function m(t){let e=window.modalState.openModalId;if(!e)return;let n=document.getElementById(e);if(!n||n.getAttribute("data-disable-click-away")==="true")return;let d=n.querySelector("[data-modal-content]"),a=t.target.closest("[data-modal-trigger]");d&&!d.contains(t.target)&&(!a||a.getAttribute("data-modal-target-id")!==e)&&o(n)}function y(t){if(t.key!=="Escape"||!window.modalState.openModalId)return;let e=document.getElementById(window.modalState.openModalId);e&&e.getAttribute("data-disable-esc")!=="true"&&o(e)}function i(t){let e=t.getAttribute("data-modal-target-id");e&&t.addEventListener("click",()=>{!t.hasAttribute("disabled")&&!t.classList.contains("opacity-50")&&u(e)})}function l(t){t.addEventListener("click",()=>{let e=t.getAttribute("data-modal-target-id");if(e)f(e);else{let n=t.closest("[data-modal]");n&&n.id&&o(n)}})}function c(t=document){t instanceof Element&&t.matches("[data-modal-trigger]")&&i(t);for(let e of t.querySelectorAll("[data-modal-trigger]"))i(e);t instanceof Element&&t.matches("[data-modal-close]")&&l(t);for(let e of t.querySelectorAll("[data-modal-close]"))l(e)}let s=t=>{let e=t.detail.target||t.detail.elt;e instanceof Element&&requestAnimationFrame(()=>c(e))};typeof window.modalEventsInitialized>"u"&&(document.addEventListener("click",m),document.addEventListener("keydown",y),window.modalEventsInitialized=!0),document.addEventListener("DOMContentLoaded",()=>c()),document.body.addEventListener("htmx:afterSwap",s),document.body.addEventListener("htmx:oobAfterSwap",s)})();})();
